<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Area Personale</title>
        <link href="../css/style.css" rel="stylesheet" />
        <script type="module" src="../js/scriptPersonalArea.js" defer></script>
    </head>
    <body asp-controller="PersonalArea" asp-action="GetAllWorks">
        <div class="navBar">
            <button id="toImpostazioni"><a href="Modifica.html">&#9432;</a></button>
            <button id="toChatBot" onclick="generateOpzionForm()">E</button>
            <a class="logout" href="Index.html" id="linkLogOutPA">Logout</a>
            <div class="menuButton" id="btnNavBar">
                <div class="bar1"></div>
                <div class="bar2"></div>
                <div class="bar3"></div>
            </div>
        </div>
        <div class="flex">
            <div class="home">
                <h1 class="title">Benvenuto nella tua area personale</h1>
                <h3 class="subTitle">Qui potrai consultare il lavoro che hai da fare e mandare messaggi ai tuoi colleghi</h3>
                <h4 id="tableMainTitle">Prossimi lavori in consegna</h4>

                <div class="boxGenitore">
                    <div class="container">
                        <table class="boxWorks">
                            <thead>
                                <tr id="header">
                                <th class="tableTitle">Titolo</th>
                                <th class="tableDesc">Descrizione</th>
                                <th class="tableDate">Data scadenza</th>
                                <th class="tableHour">Ora scadenza</th>
                                <th class="tableDel">Elimina</th>
                                </tr>
                            </thead>
                            <tbody id="tableBodyProj">
                
                            </tbody>
                        </table><br>
                    </div>

                    <div class="boxBtn">

                        <div class="boxAggiungiLavoro">
                            <button id="btnAddWork" type="button">Aggiungi un nuovo lavoro</button>
                        </div>
    
                        <div class="boxInviaMessaggi">
                            <button id="btnMsg" type="button">Invia messaggi</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script>
            function generateOpzionForm(){
        if(document.getElementById("divChatBot") == null){
            document.getElementsByClassName("home")[0].style.width = "80%";
            const div = document.createElement("div");
            div.id = "divChatBot";
            div.style.width = "20%";
            document.getElementsByClassName("flex")[0].appendChild(div);
            const chatName = document.createElement("h2");
            chatName.id = "divChatName";
            chatName.textContent = "Chiedi qualsiasi cosa, sono qui per aiutarti";
            div.appendChild(chatName);
            const form = document.createElement("form");
            form.id = "chatBot";
            div.appendChild(form);
            const response = document.createElement("textarea");
            response.id = "responseChatOllama";
            response.readOnly=true;
            form.appendChild(response);
            const prompt = document.createElement("input");
            prompt.id = "requestChatOllama";
            prompt.placeholder = "prompt richiesta";
            form.appendChild(prompt);
            const invio = document.createElement("button");
            invio.type = "button";
            invio.id="sendReqChatbot";
            invio.innerHTML = "invia";
            form.appendChild(invio);
            document.getElementById("sendReqChatbot").addEventListener("click", sendOllamaRequest);
        }
        else{
            document.getElementById("divChatBot").remove();
            document.getElementsByClassName("home")[0].style.width = "100%";
        }
    }
        </script>

    </body> 
</html>