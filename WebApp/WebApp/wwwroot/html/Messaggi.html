<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Posta</title>
        <link href="../css/style.css" rel="stylesheet" />
        <script type="module" src="../js/scriptMessaggi.js" defer></script>
    </head>
    <body>
        <div class="opacityBox">
            <div class="navBar">
                <button id="toImpostazioni"><a href="Modifica.html">E</a></button>
                <button id="toChatBot">E</button>
                <a class="logout" href="Index.html" id="linkLogOutMsg">Logout</a>
                <div class="menuButton" id="btnNavBar">
                    <div class="bar1"></div>
                    <div class="bar2"></div>
                    <div class="bar3"></div>
                </div>
            </div>
            <div class="flex">
                <div class="home">
                    <h1 id="casellaDiPosta" onclick="letturaMessaggio()">casella di posta</h1>
                    <button id="write">&#9998; Scrivi</button>
                    <div id="menuOpzioni">
                        <label for="ordinamento">ordina per:</label>
                        <input list="ordinamenti" name="ordinamento" id="ordina" placeholder="Selezionare una opzione">
                        <datalist id="ordinamenti">
                            <option value="Alfabetico: A-Z">
                            <option value="Alfabetico: Z-A">
                            <option value="Piu recente">
                            <option value="Piu vecchio">
                            <option value="Da leggere">
                            <option value="Letti">
                        </datalist>
                        <button class="cestino">&#9773;</button>
                    </div>
                    <table id="messaggi">
                        <tr>
                            <th class="tableLetto">letto</th>
                            <th id="tableMsgMittente">Mittente</th>
                            <th id="tableMsgOggetto">Oggetto</th>
                            <th id="tableMsgData">Data/Ora</th>
                        </tr>
                        <tbody id="tableBodyMsg">

                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <form method="post" id="scriviMail">
                    <p class="exit">&times</p>
                    <input type="email" name="destinatario" id="inputMsgDest" placeholder="Email destinatario"><br>
                    <input type="text" name="titolo" id="inputMsgTitle" placeholder="Oggetto"><br>
                    <label for="corpo">Messaggio</label><br>
                    <textarea name="corpo" id="inputMsgContent"></textarea><br>
                    <button type="button" id="send" asp-controller="Messaggi" asp-action="SendMsg">Invia</button>
                    <button id="cancell" type="button">cancella</button><br>
                    <span id="mailError"  class="error"></span><br>
                    <span id="objectAllert" class="error"></span>
                </form>

            <script>
                function letturaMessaggio(){
            if(document.getElementById("formMessaggio") == null){
                const form = document.createElement("form");
                form.id ="formMessaggio";
                document.body.insertBefore(form, document.body.children[0]);
                const button = document.createElement("button");
                button.className = "exit";
                button.type = "button";
                button.innerHTML = "&times";
                form.appendChild(button);
                const data = document.createElement("h3");
                data.id = "dataMessaggio";
                data.innerHTML =" ciao";
                form.appendChild(data)
                const mittente = document.createElement("h3");
                mittente.id ="mittenteMessaggio";
                mittente.innerHTML =" ciao";
                form.appendChild(mittente);
                const titolo = document.createElement("h1");
                titolo.id ="titoloMessaggio";
                titolo.innerHTML =" ciao";
                form.appendChild(titolo);
                form.appendChild(document.createElement("hr"));
                const corpo = document.createElement("p");
                corpo.id ="corpoMessaggio";
                corpo.innerHTML =" ciao";
                form.appendChild(corpo);
            }
            else{
            document.getElementById("formMessaggio").remove();
            }
        }
            </script>
    </body>
</html>